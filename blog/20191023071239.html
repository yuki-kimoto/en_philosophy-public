<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" type="text/css" href="/css/common.css">
<link rel="shortcut icon" href="/images/philosophi-favicon.png">

<title>昔CGIで掲示板を作った方へ。CGIに代わるPerl Web開発手法のまとめ - Perlの哲学 - Perlに対する誤解を解きたい</title>
<meta name="description" content="Twitterのタイムライン眺めていると、昔Perl/CGIで掲示板を作ったなぁ、改造したなぁという方が結構な数でいらっしゃいます。">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <!-- header -->
<h1>
  <a href="/"><img src="/images/philosophi-logo.png" alt="Perlの哲学 - Perlに対する誤解を解く"></a>
</h1>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- top -->

  </div>
  <div class="middle">
    <h2><a href="/blog/20191023071239.html">昔CGIで掲示板を作った方へ。CGIに代わるPerl Web開発手法のまとめ</a></h2>
<p>
  Twitterのタイムライン眺めていると、昔Perl/CGIで掲示板を作ったなぁ、改造したなぁという方が結構な数でいらっしゃいます。
</p>
<p>
  ところで、今のPerlのWeb開発って、どうなっているのという方のために、キーワードを検索すれば調べられるように案内を作成します。
</p>
<h3>PerlのWebフレームワーク</h3>
<p>
  かつては、cgi-lib.pl、CGI.pm、jcode.pl、JCode.pmなどを使って、掲示板を作ったり、Web開発を行っていたと思います。CGI自体は、ひとつの動的なWebを実現する技術ですが、パフォーマンスと開発効率の面で、課題を抱えていました。
</p>
<p>
  現代的なPerlのWebフレームワークは、パフォーマンスと開発効率を改善しています。
</p>
<p>
  PerlのWebフレームワークを五十音順で紹介します。
</p>
<ul>
  <li>
    Amon2
  </li>
  <li>
    Catalyst
  </li>
  <li>
    Dancer2
  </li>
  <li>
    Mojolicious
  </li>
  <li>
    Plack/PSGI(Webミドルウェア)
  </li>
</ul>
<p>
  Amon2, Catalyst, Dancer2, Mojoliciousは、PerlのWebフレームワークです。
</p>
<p>
  Plack/PSGIは、Webミドルウェアで、WebサーバーとWebアプリケーションがコミュニケーションをするための共通仕様を提供します。
</p>
<p>
  詳細は、記述しませんが、検索すれば、たくさんの情報を得ることができると思います。
</p>
<p>
  CGIの課題を解決するためにPHPが利用されることは多いですが、Perl自体もCGIの課題を解決するために独自の手法を発展させてきました。
</p>
<h3>Linux環境</h3>
<p>
  PerlのWebアプリケーションは、UnixかLinuxで動かします。Linuxは無料で始められるので、利用しやすいでしょう。無料で利用できる代表的なLinuxについて、五十音順で紹介します。
</p>
<ul>
  <li>CentOS</li>
  <li>Debian</li>
  <li>Fedora</li>
  <li>RedHat</li>
  <li>Ubuntu</li>
</ul>
<p>
  現在は、WindowsでLinux環境を疑似体験できる方法があります。つまり、Windowsしか持っていなくっても、PerlのWeb開発の環境構築ができるのです。方法を五十音順で紹介します。
</p>
<ul>
  <li>msys2</li>
  <li>Cygwin</li>
  <li>Windows Subsystem for Linux</li>
</ul>
<p>
  msys2は、環境構築の手順が少なく簡単で、動作が軽いので、お勧めしています。Windowsしか持っていない、Linuxを体験してみたいという方は、msys2で入門してみましょう。
</p>
<p>
  <a href="https://tutorial.perlzemi.com/blog/20180806153350.html">msys2をWindowsにインストールしてPerlを使う</a>
</p>
<h3>Perlのインストール</h3>
<p>
  Web開発を始める場合は、Perlのモジュールを使うので、Linux環境に、その環境ローカルで使えるPerlをインストールすることが、お勧めです。
</p>
<p>
  このためのツールを五十音順で紹介します。
</p>
<ul>
  <li><a href="https://tutorial.perlzemi.com/blog/20110220130464.html">perlbrew</a></li>
  <li><a href="https://tutorial.perlzemi.com/blog/20180816153437.html">plenv</a></li>
</ul>
<h3>CPANモジュールインストール</h3>
<p>
  開発環境や本番環境へのCPANモジュールのインストールは、必要なモジュールをcpanfileに定義して、cpanmというコマンドを使うと、自動的に配置できます。
</p>
<ul>
  <li>cpanm</li>
  <li>cpanfile</li>
</ul>
<p>
  perlbrewやplenvのオプションとしてcpanmをインストールするコマンドが存在するので、それを利用するのが簡単です。
</p>
<h3>本番環境</h3>
<p>
  本番環境は、クラウドサービスかVPSサービスを借りて、配置することになります。
</p>
<ul>
  <li>AWL</li>
  <li>Microsoft Azure</li>
  <li>さくらのクラウド</li>
  <li>さくらのVPS</li>
</ul>
<p>
  さくらのVPSは、月額698円で、本物のLinux環境を利用できます。個人で始める方は、こちらが、低額で、お安くて便利です。
</p>
<p>
  企業が、本番環境に配置する場合は、半固定料金か、従量制課金のクラウドを使うことが多いかと思います。
</p>
<p>
  本番環境へのファイルの配置は、Githubというサービスとgitというツールを使うのが簡単です。昔は手動でFTPでファイルを上げていましたが、gitを使うと、すべてのファイルをひとつのコマンドで、配置することができます。
</p>
<ul>
  <li>Github</li>
  <li>git</li>
</ul>
<h3>Webサーバー</h3>
<p>
  Webサーバーです。よく利用されるWebサーバーです。
</p>
<p>
  インストールは、「Linux名 Webサーバー名 インストール」で検索しましょう。
</p>
<ul>
  <li>
    Apache
  </li>
  <li>
    Nginx
  </li>
</ul>
<p>
  どうやって、WebアプリとWebサーバーを接続するのでしょうか。
</p>
<p>
  それは、リバースプロキシという機能を使って、WebサーバーとWebアプリを接続します。
</p>
<p>
  「Apache リバースプロキシ」「Nginx リバースプロキシ」で、検索してみましょう。
</p>
<h3>データベース</h3>
<p>
  Webアプリでよく使われるデータベースです。
</p>
<ul>
  <li>MySQL</li>
  <li>MariaDB</li>
  <li>PostgreSQL</li>
</ul>
<p>
  インストールは、「Linux名 データベース名 インストール」で検索しましょう。
</p>
<p>
  MySQLとMariaDBは、まぁ同じようなものです。Perlからデータベース接続する場合はDBIとDBD::mysqlが必要です。
</p>
<p>
  PostgreSQLに接続するためにはDBIとDBD::Pgが必要です。
</p>
<h3>データベースへの接続管理とO/Rマッパー</h3>
<p>
  データベースへの接続は、接続管理維持や、joinを簡単に使いたいなどの要望がでてきますね。そういう場合のために、いくつかのO/Rマッパーを紹介しておきましょう。五十音順です。
</p>
<ul>
  <li>Aniki</li>
  <li>DBIx::Class</li>
  <li>DBIx::Connector</li>
  <li>DBIx::Custom</li>
  <li>DBIx::Handler</li>
  <li>DBIx::Simple</li>
  <li>SQL::Maker</li>
  <li>Teng</li>
</ul>
<p>
  DBIx::ConnectorとDBIx::Handlerは接続管理だけをやってくれるモジュールです。それ以外は、さらに、接続管理モジュールをラッピングしていて、O/Rマッパー機能を提供します。SQLのように使える抽象度の低いものから、データベースアクセスをメソッドにして抽象度の高いものまでがそろっています。
</p>
<h3>リモート環境への接続</h3>
<p>
  開発環境がリモートにある場合は、いったいどうやって接続して、ファイルを更新するのでしょうか?
</p>
<p>
  Windowsでは、そのためのツールがあります。以下のSSH接続できるツールを使うと、リモートサーバでコマンドを送信することができます。
</p>
<ul>
  <li>Putty</li>
  <li>TeraTerm</li>
</ul>
<p>
  Mac OSの場合は、sshコマンドなどが使えるでしょう。
</p>
<p>
  リモードサーバーでの、ファイルの更新はどうするのでしょうか?
</p>
<p>
  以下のツールが使えます。
</p>
<ul>
  <li>WinSCP</li>
</ul>
<p>
  Mac OSの場合は、sshで接続語、vimエディタを使えるでしょう。
</p>
<h3>ドメインの取得</h3>
<p>
  ドメイン取得サービスで、ドメインを取得しましょう。
</p>
<ul>
  <li>お名前.com</li>
  <li>ムームードメイン</li>
</ul>
<h3>SSLを使いたい</h3>
<p>
  Let's Encryptというサービスを使うと、無料でSSL証明書を発行することができます。
</p>
<ul>
  <li>Let's Encrypt</li>
</ul>
<h3>まとめ</h3>
<p>
  PerlのWeb開発の手法は、一度覚えてしまえば、非常に応用が利く技術です。Web技術は、ひとつひとつの難易度は高くないのですが、構成要素が、多く継続的な学習がまさに必要になる分野だと思います。
</p>
<p>
  CGIの次に、現代的なWeb開発の手法を知りたいという方は、ぜひ参考にしてみてください。
</p>
<p>
  今システムがCGIで動いていて、現代的なPerlのWeb開発手法に移行したいという開発マネージャーの方もぜひ参考にしてください。
</p>
<p>
  CGIの課題解決としてPHPが開発されましたが、Perl自体もCGIの課題解決のために独自の発展を遂げています。
</p>

  </div>
  <div class="bottom">
    <!-- bottom -->

  </div>
</div>

        </div>
        <div class="side">
          <!-- side -->
<div class="side-list">
  <div class="side-list-title">
    目次
  </div>
  <ul>
    <li><a href="/list.html">記事の一覧</a></li>
  </ul>
</div>

        </div>
      </div>
      <div class="footer">
        <!-- footer -->
<a href="https://github.com/yuki-kimoto/giblog">Giblog</a>

      </div>
    </div>
  </body>
</html>
